---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cbs_array_azure Resource - terraform-provider-cbs"
subcategory: ""
description: |-

---

# cbs_array_azure Resource

Allows the deployment and management of a Cloud Block Store instance on Azure. The instance is deployed as an Azure Managed Application.

The instance is deployed at Purity version 6.1.0.

Refer to the [deployment guide](https://support.purestorage.com/FlashArray/PurityFA/Cloud_Block_Store/Cloud_Block_Store_Deployment_and_Configuration_Guide_for_Azure) for information on how to configure the Azure environment for the CBS instance.

!>Currently, destroying the Terraform resource **will not** deactivate the CBS instance. Due to this,
we recommend that you deactivate the instance from inside the array itself. For information on how
to do this, refer to the [relevant section](https://support.purestorage.com/FlashArray/PurityFA/Cloud_Block_Store/Cloud_Block_Store_Deployment_and_Configuration_Guide_for_Azure#Removing_Cloud_Block_Store) of the guide. If the instance is destroyed by another
method than the one outlined in the guide, including `terraform destroy`, then you must contact
Pure Storage Support in order to deactivate the instance.

~>Updates are currently not supported for this resource.

## Example Usage

```hcl
resource "cbs_array_azure" "azure_instance" {

    array_name = "terraform-example-instance"

    location = "location_xxxx"
    resource_group_name = "resource_xxxx"
    license_key = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx"
    log_sender_domain = "example-company.org"
    alert_recipients = ["admin1@example-company.org", "admin2@example-company.org"]
    array_model = "V10MUR1"
    zone = 1
    virtual_network = "VN-xxxxxxxxxxxxxx"

    management_subnet = "SN-xxxxxxxxxxxxxx"
    system_subnet = "SN-xxxxxxxxxxxxxx"
    iscsi_subnet = "SN-xxxxxxxxxxxxxx"
    replication_subnet = "SN-xxxxxxxxxxxxxx"

    management_resource_group = "management_resource_xxxx"
    system_resource_group = "system_resource_xxxx"
    iscsi_resource_group = "iscsi_resource_xxxx"
    replication_resource_group = "replication_resource_xxxx"

    jit_approval {
        approvers {
              groups = ["group_xxxx"]
        }
    }
}
```


## Argument Reference

- `alert_recipients` (Optional) - List of email addresses to receive alerts.
- `array_model` (Required) - CBS array size to launch. The possible values are `V10MUR1` or `V20MUR1`.
- `array_name` (Required) - Name of the array, and the name of the managed application.
- `iscsi_resource_group` (Required) - The Resource Group containing the ISCSI Virtual Network.
- `iscsi_subnet` (Required) - Subnet containing the iSCSI interfaces on the array.
- `jit_approval` (Required) - A Just In Time remote access configuration block. See [below for nested schema](#nestedblock--jit_approval).
- `license_key` (Required) - Pure Storage-provided license key.
- `location` (Required) - Azure location in which to deploy the array.
- `log_sender_domain` (Required) - Domain name used to determine how CBS logs are parsed and treated by Pure Storage Support and Escalations.
- `management_resource_group` (Required) - Resource Group containing the Management Network Resources on the array.
- `management_subnet` (Required) - Subnet containing the management interfaces on the array.
- `pureuser_public_key` (Optional) - Public ssh key to allow pureuser login.
- `replication_resource_group` (Required) - The Resource Group containing the Replication Virtual Network.
- `replication_subnet` (Required) - Subnet containing the replication interfaces on the array.
- `resource_group_name` (Required) - Name of the resource group in which to deploy the managed application.
- `system_resource_group` (Required) - Resource group name for the virtual network containing the system interfaces.
- `system_subnet` (Required) - Subnet for the system interface of the Array.
- `tags` (Optional) - A list of tags to apply to all resources in the managed application.
- `virtual_network` (Required) - Virtual network that contains the network interfaces of the array.
- `zone` (Required) - The Availability Zone within the deployment location.


<a id="nestedblock--jit_approval"></a>
### Nested Schema for `jit_approval`

JIT is always enabled in manual mode for CBS instances. Users are able to specify the groups that
can approve JIT access requests as the maximum duration of JIT access requests.

- `approvers` (Required) - A JIT approvers configuration block. See [below for nested schema](#nestedblock--jit_approval--approvers).
- `activation_maximum_duration` (Optional) - The maximum possible duration of a JIT access request. The possible values are
`PT1H`, `PT2H`, `PT3H`, `PT4H`, `PT5H`, `PT6H`, `PT7H`, and `PT8H`. Defaults to `PT8H`.


<a id="nestedblock--jit_approval--approvers"></a>
### Nested Schema for `jit_approval.approvers`

- `groups` (Required) - A list of Azure Active Directory groups that enable their users to approve JIT access requests.

## Attribute Reference

- `application_name` - The name of the managed application.
- `ct0_name` - The name of the controller ct0 instance.
- `ct1_name` - The name of the controller ct1 instance.
- `iscsi_endpoint_ct0` - iSCSI IP address and port of the ct0 instance.
- `iscsi_endpoint_ct1` - iSCSI IP address and port of the ct1 instance.
- `managed_resource_group_name` - The name of the managed resource group of the managed application.
- `management_endpoint` - Management IP address of the CBS instance.
- `management_endpoint_ct0` - Management IP address of the ct0 instance.
- `management_endpoint_ct1` - Management IP address of the ct1 instance.
- `replication_endpoint_ct0` - Replication IP address of the ct0 instance.
- `replication_endpoint_ct1` - Replication IP address of the ct1 instance.